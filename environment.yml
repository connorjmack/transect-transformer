# Conda environment for CliffCast
# Creates environment with PDAL for COPC conversion and all project dependencies
#
# Usage:
#   conda env create -f environment.yml
#   conda activate cliffcast
#   pip install -e .
#
# To update existing environment:
#   conda env update -f environment.yml --prune

name: cliffcast
channels:
  - conda-forge
  - defaults

dependencies:
  # Python version
  - python=3.11

  # PDAL - required for COPC conversion (not available via pip alone)
  - pdal>=2.5
  - python-pdal>=3.0

  # Geospatial (better from conda-forge for GDAL compatibility)
  - gdal>=3.6
  - rasterio>=1.3
  - geopandas>=0.14
  - shapely>=2.0
  - pyproj>=3.5

  # Point cloud
  - laspy>=2.5
  - lazrs-python  # For LAZ compression support

  # Core scientific
  - numpy>=1.24
  - scipy>=1.10
  - pandas>=2.0

  # NetCDF/HDF5
  - xarray>=2023.1
  - netcdf4>=1.6
  - h5py>=3.8

  # Visualization
  - matplotlib>=3.7
  - seaborn>=0.13

  # Testing
  - pytest>=7.4
  - pytest-cov>=4.1

  # Pip packages (not on conda-forge or better from pip)
  - pip
  - pip:
      # Core ML
      - torch>=2.0
      - einops>=0.7

      # Config & logging
      - pyyaml>=6.0
      - omegaconf>=2.3
      - wandb>=0.16

      # Visualization (interactive)
      - plotly>=5.18
      - streamlit>=1.30

      # ML utilities
      - scikit-learn>=1.3
      - tqdm>=4.65

      # Code quality
      - black>=23.0
      - ruff>=0.1
      - mypy>=1.7
